---
layout: default
title: Liber 777 API - Lucas Rafaldini
---

<div class="api-777-header">
    <h1>üîÆ Liber 777 API</h1>
    <p>
        Bem-vindo √† API da Tabela de Correspond√™ncias do Liber 777. </p>    
    <p>
        Esta √© uma das obras mais importantes da magia cerimonial moderna, compilada por Aleister Crowley e Allan Bennett.
    </p>
    <div class="api-info">
        <div class="info-item">
            <span class="info-label">üìä Total de Colunas:</span>
            <span class="info-value" id="totalColumns">Carregando...</span>
        </div>
        <div class="info-item">
            <span class="info-label">üìà Valores por Coluna:</span>
            <span class="info-value">32</span>
        </div>
        <div class="info-item">
            <span class="info-label">üîÑ √öltima Atualiza√ß√£o:</span>
            <span class="info-value">Agosto 2025</span>
        </div>
    </div>
</div>

<div class="api-777-content">
    <div class="api-section">
        <h2>Como usar a API</h2>
        <div class="usage-grid">
            <div class="usage-card">
                <h3>üîç Buscar todos os Dados</h3>
                <p>Acesse todos os dados da tabela de correspond√™ncias de uma vez.</p>
                <a href="/apis/777/all/" target="_blank" class="btn btn-primary">Acessar todos os dados</a>
            </div>

            <div class="usage-card">
                <h3>üîó URLs Diretas</h3>
                <p>Use estas URLs para acessar dados espec√≠ficos:</p>
                <ul class="url-list">
                    <li><code>/apis/777/all/</code> - Todos os dados</li>
                    <li><code>/apis/777/column/{n√∫mero da coluna}/</code> - Coluna desejada</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="api-section">
        <h2>üîç Busca R√°pida</h2>
        <div class="search-container">
            <input type="text" id="quickSearch" placeholder="Digite para buscar colunas ou valores..." class="search-input">
            <div class="search-results" id="searchResults"></div>
        </div>
    </div>

    <div class="api-section">
        <h2>Navega√ß√£o por Colunas</h2>
        <div class="columns-grid" id="columnsGrid">
            <div class="loading">Carregando colunas...</div>
        </div>
    </div>

    <div class="api-section">
        <h2>Sobre o Liber 777</h2>
        <div class="about-content">
            <p>
                O Liber 777 √© uma das obras mais importantes da magia cerimonial moderna. Compilado por Aleister Crowley 
                e Allan Bennett, cont√©m uma extensa tabela de correspond√™ncias que relaciona elementos de diferentes 
                sistemas m√°gicos, incluindo:
            </p>
            <ul>
                <li><strong>Cabala:</strong> Sephiroth, caminhos e correspond√™ncias hebraicas</li>
                <li><strong>Astrologia:</strong> Planetas, signos e aspectos astrol√≥gicos</li>
                <li><strong>Elementos:</strong> Fogo, √°gua, ar e terra</li>
                <li><strong>Magia Cerimonial:</strong> Instrumentos, cores e invoca√ß√µes</li>
                <li><strong>Tarot:</strong> Arcanos maiores e menores</li>
            </ul>
            <p>
                Esta API disponibiliza todos esses dados de forma estruturada e acess√≠vel, permitindo que desenvolvedores 
                e pesquisadores possam integrar essas informa√ß√µes em suas aplica√ß√µes.
            </p>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Load API data and populate interface
    loadAPIData();
    
    // Setup search functionality
    setupSearch();
});

async function loadAPIData() {
    try {
        const response = await fetch('/apis/777/all/index.json');
        const data = await response.json();
        
        // Update total columns count
        const totalColumns = Object.keys(data).length;
        document.getElementById('totalColumns').textContent = totalColumns;
        
        // Populate columns grid
        populateColumnsGrid(data);
        
    } catch (error) {
        console.error('Erro ao carregar dados da API:', error);
        document.getElementById('totalColumns').textContent = 'Erro ao carregar';
    }
}



function populateColumnsGrid(data) {
    const gridContainer = document.getElementById('columnsGrid');
    const columns = Object.keys(data);
    
    const gridHTML = columns.map(column => {
        const columnData = data[column];
        return `
            <div class="column-card">
                <div class="column-header">
                    <h3>Coluna ${column}</h3>
                    <span class="column-status">Ativo</span>
                </div>
                <p class="column-description">${columnData.columnName || 'Sem descri√ß√£o'}</p>
                <div class="column-stats">
                    <span class="stat">${Object.keys(columnData).length - 1} valores</span>
                </div>
                <div class="column-actions">
                    <a href="/apis/777/column/${column}/" class="btn btn-secondary">Ver Coluna</a>
                </div>
            </div>
        `;
    }).join('');
    
    gridContainer.innerHTML = gridHTML;
}

function setupSearch() {
    const searchInput = document.getElementById('quickSearch');
    const resultsContainer = document.getElementById('searchResults');
    
    searchInput.addEventListener('input', async (e) => {
        const query = e.target.value;
        
        if (query.length < 2) {
            resultsContainer.innerHTML = '';
            return;
        }
        
        try {
            const response = await fetch('/apis/777/all/index.json');
            const data = await response.json();
            
            const results = searchInData(data, query);
            displaySearchResults(results, resultsContainer);
        } catch (error) {
            console.error('Erro na busca:', error);
        }
    });
}

function searchInData(data, query) {
    const results = [];
    const queryLower = query.toLowerCase();
    
    Object.keys(data).forEach(column => {
        const columnData = data[column];
        const columnName = columnData.columnName || '';
        
        if (columnName.toLowerCase().includes(queryLower)) {
            results.push({
                type: 'column',
                id: column,
                name: columnName,
                url: `/apis/777/column/${column}/`
            });
        }
        
        // Search in column values
        Object.keys(columnData).forEach(key => {
            const value = columnData[key];
            if (typeof value === 'string' && value.toLowerCase().includes(queryLower)) {
                results.push({
                    type: 'value',
                    column: column,
                    key: key,
                    value: value,
                    columnName: columnName
                });
            }
        });
    });
    
    return results.slice(0, 15); // Limit results
}

function displaySearchResults(results, container) {
    if (results.length === 0) {
        container.innerHTML = '<p class="no-results">Nenhum resultado encontrado</p>';
        return;
    }
    
    const resultsHTML = results.map(result => {
        if (result.type === 'column') {
            return `
                <div class="search-result">
                    <a href="${result.url}">
                        <strong>Coluna ${result.id}</strong>: ${result.name}
                    </a>
                </div>
            `;
        } else {
            return `
                <div class="search-result">
                    <strong>${result.columnName}</strong> (${result.key}): ${result.value}
                </div>
            `;
        }
    }).join('');
    
    container.innerHTML = resultsHTML;
}
</script>
